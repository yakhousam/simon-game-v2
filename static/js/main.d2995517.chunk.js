(this["webpackJsonpsimon-game-v2"]=this["webpackJsonpsimon-game-v2"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n.p+"static/media/simonSound1.319c7710.mp3"},function(e,t,n){e.exports=n.p+"static/media/simonSound2.c3c86e71.mp3"},function(e,t,n){e.exports=n.p+"static/media/simonSound3.f3c18b98.mp3"},function(e,t,n){e.exports=n.p+"static/media/simonSound4.f4a912ee.mp3"},function(e,t,n){e.exports=n.p+"static/media/wrong-answer-sound-effect.093eed4f.mp3"},function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(5),o=n.n(a),i=(n(16),n(3)),s=n(1),l=n(2),u=(n(17),n(6)),d=n.n(u),b=n(7),p=n.n(b),f=n(8),m=n.n(f),y=n(9),w=n.n(y),E=n(10),g=n.n(E),O=[d.a,p.a,m.a,w.a,g.a];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=["btnGreen","btnRed","btnYellow","btnBlue"],N={btnGreen:{clicked:!1,classClicked:"green-clicked",soundEffect:O[0]},btnRed:{clicked:!1,classClicked:"red-clicked",soundEffect:O[1]},btnYellow:{clicked:!1,classClicked:"yellow-clicked",soundEffect:O[2]},btnBlue:{clicked:!1,classClicked:"blue-clicked",soundEffect:O[3]},btnWrong:{btn:"",classClicked:"wrong",soundEffect:O[4]},playList:[S[Math.floor(4*Math.random())]],userPlayList:[],start:!1,reset:!1,isPlaying:!1,displayer:"Push red button",cursor:0,scoreWin:10,wrong:!1,win:!1},P=function(e,t){switch(console.log("dispatch =",t.type,t.btn||"",t.text||""),t.type){case"ADD_PLAYLIST":return R({},e,{playList:[].concat(Object(s.a)(e.playList),[t.btn])});case"IS_PLAYING":return R({},e,{isPlaying:!0});case"IS_NOT_PLAYING":return R({},e,{isPlaying:!1});case"START":return R({},e,{start:!e.start,win:!1,wrong:!1});case"RESET":return R({},N,{playList:[S[Math.floor(4*Math.random())]]});case"INC_CURSOR":return R({},e,{cursor:e.cursor+1});case"RESET_CURSOR":return R({},e,{cursor:0});case"SET_DISPLAYER":return R({},e,{displayer:t.text});case"BTN_PLAY":return R({},e,Object(l.a)({},t.btn,R({},e[t.btn],{clicked:!0})));case"BTN_STOP":return R({},e,Object(l.a)({},t.btn,R({},e[t.btn],{clicked:!1})));case"WIN":return R({},e,{win:!0,start:!1,playList:[S[Math.floor(4*Math.random())]],cursor:0,displayer:"YOU WIN"});case"WRONG":return R({},e,{wrong:t.wrong,btnWrong:R({},e.btnWrong,{btn:t.btn})});default:return e}};var k=function(){var e=Object(c.useReducer)(P,N),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)([]),l=Object(i.a)(o,2),u=l[0],d=l[1],b=Object(c.useRef)(),p=Object(c.useRef)(),f=Object(c.useRef)(),m=Object(c.useRef)(),y=Object(c.useRef)(),w=function(e){"btnGreen"===e&&(b.current.currentTime=0,b.current.play()),"btnRed"===e&&(p.current.currentTime=0,p.current.play()),"btnYellow"===e&&(f.current.currentTime=0,f.current.play()),"btnBlue"===e&&(m.current.currentTime=0,m.current.play()),"wrong"===e&&(y.current.currentTime=0,y.current.play())},E=function(e){var t=e?[].concat(Object(s.a)(n.playList),[e]):Object(s.a)(n.playList);console.log("play playlist----",t),a({type:"IS_PLAYING"}),a({type:"RESET_CURSOR"});var c=setTimeout((function(){t.forEach((function(e,t){var n=setTimeout((function(){a({type:"BTN_PLAY",btn:e}),a({type:"SET_DISPLAYER",text:t+1}),w(e)}),1e3*(t+1));d([].concat(Object(s.a)(u),[n]))}));var e=setTimeout((function(){a({type:"IS_NOT_PLAYING"}),a({type:"SET_DISPLAYER",text:"YOUR TURN"})}),1e3*(t.length+2));d([].concat(Object(s.a)(u),[e]))}),1e3);d([].concat(Object(s.a)(u),[c]))},g=function(e){if(n.playList[n.cursor]===e){if(console.log("user click --------"),a({type:"SET_DISPLAYER",text:"".concat(n.cursor+1," : ").concat(n.playList.length)}),w(e),n.cursor+1===n.scoreWin)return void a({type:"WIN"});if(a({type:"INC_CURSOR"}),n.cursor===n.playList.length-1){var t=S[Math.floor(4*Math.random())];a({type:"ADD_PLAYLIST",btn:t}),E(t)}}else a({type:"SET_DISPLAYER",text:"WRONG"}),a({type:"WRONG",wrong:!0,btn:e}),w("wrong"),a({type:"RESET_CURSOR"}),E()},O=n.btnGreen,T=n.btnRed,R=n.btnYellow,k=n.btnBlue,v=n.btnWrong;return window.console.log=function(){},r.a.createElement("div",{className:"grid ".concat(n.win?"win":""," ").concat(n.wrong?"wrong":"")},r.a.createElement("div",{className:"green ".concat(O.clicked?O.classClicked:""," ").concat("btnGreen"===v.btn?v.classClicked:""),onClick:function(){n.start&&(n.isPlaying||(a({type:"BTN_PLAY",btn:"btnGreen"}),g("btnGreen")))}}),r.a.createElement("div",{className:"red ".concat(T.clicked?T.classClicked:""," ").concat("btnRed"===v.btn?v.classClicked:""),onClick:function(){n.start&&(n.isPlaying||(a({type:"BTN_PLAY",btn:"btnRed"}),g("btnRed")))}}),r.a.createElement("div",{className:"yellow ".concat(R.clicked?R.classClicked:""," ").concat("btnYellow"===v.btn?v.classClicked:""),onClick:function(){n.start&&(n.isPlaying||(a({type:"BTN_PLAY",btn:"btnYellow"}),g("btnYellow")))}}),r.a.createElement("div",{className:"blue ".concat(k.clicked?k.classClicked:""," ").concat("btnBlue"===v.btn?v.classClicked:""),onClick:function(){n.start&&(n.isPlaying||(a({type:"BTN_PLAY",btn:"btnBlue"}),g("btnBlue")))}}),r.a.createElement("div",{className:"control ".concat(n.win?"win":""," ").concat(n.wrong?"wrong":"")},r.a.createElement("h1",{className:"title"},"Simon"),r.a.createElement("div",{className:"monitor ".concat(n.win?"win":""," ").concat(n.wrong?"wrong":"")},r.a.createElement("span",null,n.displayer)),r.a.createElement("div",{className:"btn-wrap"},r.a.createElement("div",{className:"btn",style:{backgroundColor:n.start?"green":"red"},onClick:function(){n.start?(a({type:"RESET"}),u.forEach((function(e){clearTimeout(e)}))):(a({type:"START"}),E())}}))),r.a.createElement("div",{className:"sp-vertical ".concat(n.win?"win":""," ").concat(n.wrong?"wrong":"")}),r.a.createElement("div",{className:"sp-horizontal ".concat(n.win?"win":""," ").concat(n.wrong?"wrong":"")}),r.a.createElement("audio",{src:n.btnGreen.soundEffect,ref:b,onEnded:function(){a({type:"BTN_STOP",btn:"btnGreen"})}}),r.a.createElement("audio",{src:n.btnRed.soundEffect,ref:p,onEnded:function(){a({type:"BTN_STOP",btn:"btnRed"})}}),r.a.createElement("audio",{src:n.btnYellow.soundEffect,ref:f,onEnded:function(){a({type:"BTN_STOP",btn:"btnYellow"})}}),r.a.createElement("audio",{src:n.btnBlue.soundEffect,ref:m,onEnded:function(){a({type:"BTN_STOP",btn:"btnBlue"})}}),r.a.createElement("audio",{src:n.btnWrong.soundEffect,ref:y,onEnded:function(){a({type:"BTN_STOP",btn:n.btnWrong.btn}),a({type:"WRONG",wrong:!1,btn:""})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[11,1,2]]]);
//# sourceMappingURL=main.d2995517.chunk.js.map